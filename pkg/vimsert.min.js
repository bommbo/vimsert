!function(a){"use strict";var d,e,f,g,h,i,k,l,m,n;e=a("textarea").not(".ace_editor").add('input[type="text"]'),a.fn.vimsert=function(){this.bind("keypress",function(a){a.ctrlKey&&9==a.charCode&&i(a)})},i=function(b){var c;f=a(b.currentTarget),c=f.val(),k.setValue(c),m(l),b.preventDefault()},d=function(){g(),h()},g=function(){a("body").append('<textarea id="vimsert-editor" rows="100" cols="80"></textarea>'),a("vimsert-editor").css({position:"absolute",top:"0",left:"0",bottom:"0",right:"0"}),k=ace.edit("vimsert-editor"),k.setTheme("ace/theme/solarized_dark"),ace.config.loadModule("ace/keyboard/vim",function(){var b=require("ace/keyboard/vim").CodeMirror.Vim;b.defineEx("write","w",function(){f.val(k.getValue())}),b.defineEx("quit","q",function(){n()}),b.defineEx("wq","wq",function(){f.val(k.getValue()),n()})}),k.setKeyboardHandler("ace/keyboard/vim"),k.getSession(),l=a(".ace_editor"),l.css({display:"none",height:"75%",width:"75%",position:"fixed","font-size":"15px","z-index":"9999",left:"50%",top:"50%",transform:"translateX(-50%) translateY(-55%)","box-shadow":"#000 0 0 10px"})},h=function(){a(e).vimsert()},m=function(){l.css("display","block"),k.focus(),k.clearSelection()},n=function(){l.css("display","none"),setTimeout(function(){var a=2*f.val().length;f[0].setSelectionRange(a,a),f.focus()},100)},d()}(jQuery,document,window);